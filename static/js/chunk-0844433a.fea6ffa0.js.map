{"version":3,"sources":["webpack:///./src/views/Login/index.vue","webpack:///./src/views/Login/index.vue?93f2","webpack:///./src/views/Login/index.vue?e1b2"],"names":["class","model","ruleForm","status-icon","rules","ref","prop","name","prepend","type","pass","autocomplete","style","login","setup","validatePass","rule","value","callback","Error","checkName","state","count","validator","trigger","router","route","store","loginRef","roles","validate","valid","includes","dispatch","then","success","message","push","path","query","redirect","error","console","log","render","__scopeId"],"mappings":"wPACOA,MAAM,c,GACJA,MAAM,iB,EACT,eAA6B,OAAxBA,MAAM,SAAQ,QAAI,G,iBASE,M,iBAKA,M,iBAIyC,M,oMApBtE,eAwBM,MAxBN,EAwBM,CAvBJ,eAsBM,MAtBN,EAsBM,CArBJ,EACA,eAmBU,GAlBPC,MAAO,EAAAC,SACRC,cAAA,GACCC,MAAO,EAAAA,MACRC,IAAI,WACJL,MAAM,iB,YACN,iBAIe,CAJf,eAIe,GAJDM,KAAK,QAAM,C,WACvB,iBAEW,CAFX,eAEW,G,WAFQ,EAAAJ,SAASK,K,qDAAT,EAAAL,SAASK,KAAI,K,CACnBC,QAAO,GAAC,iBAAE,C,uCAGzB,eAIe,GAJDF,KAAK,QAAM,C,WACvB,iBAEW,CAFX,eAEW,GAFDG,KAAK,W,WAAoB,EAAAP,SAASQ,K,qDAAT,EAAAR,SAASQ,KAAI,IAAEC,aAAa,O,CAClDH,QAAO,GAAC,iBAAE,C,uCAGzB,eAEe,Q,WADb,iBAA4E,CAA5E,eAA4E,GAAjEI,MAAA,eAAmBH,KAAK,UAAW,QAAK,+BAAE,EAAAI,W,YAAS,iBAAE,C,uHAa3D,GACbC,MADa,WAEX,IAAMC,EAAe,SAACC,EAAMC,EAAOC,GACnB,KAAVD,EACFC,EAAS,IAAIC,MAAM,UAEnBD,KAGEE,EAAY,SAACJ,EAAMC,EAAOC,GAChB,KAAVD,EACFC,EAAS,IAAIC,MAAM,UAEnBD,KAGEG,EAAQ,eAAS,CACrBC,MAAO,EACPpB,SAAU,CACRK,KAAM,QACNG,KAAM,SAERN,MAAO,CACLM,KAAM,CACJ,CAAEa,UAAWR,EAAcS,QAAS,SAEtCjB,KAAM,CACJ,CAAEgB,UAAWH,EAAWI,QAAS,YAIjCC,EAAS,iBACTC,EAAQ,iBACRC,EAAQ,iBAERC,EAAW,eAAI,MACfC,EAAQ,CAAC,QAAS,UAClBhB,EAAQ,WACZe,EAASX,MAAMa,UAAS,SAACC,GACvB,OAAIA,EACEF,EAAMG,SAASX,EAAMnB,SAASK,WAEhCoB,EAAMM,SAAS,QAASZ,EAAMnB,UAAUgC,MAAK,WAC3C,OAAUC,QAAQ,CAChBC,QAAS,OACT3B,KAAM,YAERgB,EAAOY,KAAK,CACVC,KAAMZ,EAAMa,MAAMC,UAAY,UAIlC,OAAUC,MAAM,CACdL,QAAS,qBACT3B,KAAM,WAED,IAGTiC,QAAQC,IAAI,mBACL,OAIb,wCACK,eAAOtB,IADZ,IAEER,QACAe,e,UChGN,EAAOgB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf","file":"static/js/chunk-0844433a.fea6ffa0.js","sourcesContent":["<template>\n  <div class=\"login-wrap\">\n    <div class=\"login-content\">\n      <div class=\"title\">管理系统</div>\n      <el-form\n        :model=\"ruleForm\"\n        status-icon\n        :rules=\"rules\"\n        ref=\"loginRef\"\n        class=\"demo-ruleForm\">\n        <el-form-item prop=\"name\">\n          <el-input v-model=\"ruleForm.name\">\n            <template #prepend>账号</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"pass\">\n          <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\">\n            <template #prepend>密码</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button style=\"width:100%\" type=\"primary\" @click=\"login()\">登录</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, ref } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { useStore } from 'vuex';\n\nexport default {\n  setup() {\n    const validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        callback();\n      }\n    };\n    const checkName = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入账号'));\n      } else {\n        callback();\n      }\n    };\n    const state = reactive({\n      count: 0,\n      ruleForm: {\n        name: 'admin',\n        pass: 'admin',\n      },\n      rules: {\n        pass: [\n          { validator: validatePass, trigger: 'blur' },\n        ],\n        name: [\n          { validator: checkName, trigger: 'blur' },\n        ],\n      },\n    });\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    // 登录\n    const loginRef = ref(null);\n    const roles = ['admin', 'editor'];\n    const login = () => {\n      loginRef.value.validate((valid) => {\n        if (valid) {\n          if (roles.includes(state.ruleForm.name)) {\n            // 调接口去登录\n            store.dispatch('login', state.ruleForm).then(() => {\n              ElMessage.success({\n                message: '登录成功',\n                type: 'success',\n              });\n              router.push({\n                path: route.query.redirect || '/',\n              });\n            });\n          } else {\n            ElMessage.error({\n              message: '用户名必须是admin/editor',\n              type: 'error',\n            });\n            return false;\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    };\n    return {\n      ...toRefs(state),\n      login,\n      loginRef,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login-wrap{\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: url('~@/assets/imgs/login-bg.jpg') no-repeat;\n  background-size: cover;\n  .login-content{\n    background: rgba(255, 255, 255, 0.3);\n    width: 450px;\n    height: 310px;\n    .title{\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n      border-bottom: 1px solid #ccc;\n    }\n    .el-form{\n      padding: 20px;\n    }\n  }\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=3b6df42a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=3b6df42a&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3b6df42a\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=3b6df42a&lang=less&scoped=true\""],"sourceRoot":""}